<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans.xsd
              http://www.springframework.org/schema/jdbc
              http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
              http://www.springframework.org/schema/context
              http://www.springframework.org/schema/context/spring-context.xsd">
	
    <!--context:property-placeholder location="classpath:ca/corefacility/bioinformatics/irida/config/jdbc.properties,classpath:ca/corefacility/bioinformatics/irida/config/filesystem.properties"/--> 
    <import resource="properties.xml"/>
    
    <bean id="projectRepository" class="ca.corefacility.bioinformatics.irida.repositories.relational.ProjectRelationalRepository">
        <constructor-arg ref="dataSource"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    
    <bean id="userRepository" class="ca.corefacility.bioinformatics.irida.repositories.relational.UserRelationalRepository">
        <constructor-arg ref="dataSource"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    
    <bean id="sampleRepository" class="ca.corefacility.bioinformatics.irida.repositories.relational.SampleRelationalRepository">
        <constructor-arg ref="dataSource"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    
    <bean id="sequenceFileRepository" class="ca.corefacility.bioinformatics.irida.repositories.relational.SequenceFileRelationalRepository">
        <constructor-arg ref="dataSource"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    
    <bean id="miseqRunRepository" class="ca.corefacility.bioinformatics.irida.repositories.relational.MiseqRunRelationalRepository">
        <constructor-arg ref="dataSource"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>    
    
    <bean id="sequenceFileFilesystemRepository"
          class="ca.corefacility.bioinformatics.irida.repositories.filesystem.SequenceFileFilesystemRepository">
        <constructor-arg value="${sequence.file.base.directory}"/>
    </bean>
    
    <bean id="auditRepository" class="ca.corefacility.bioinformatics.irida.repositories.relational.AuditRepository">
        <constructor-arg ref="dataSource"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    
    <bean id="revisionListener" init-method="initialize" class="ca.corefacility.bioinformatics.irida.repositories.relational.auditing.UserRevListener"/>
             
</beans>
