<!DOCTYPE html>
<html lang="en" ng-app="irida">
<head th:substituteby="fragments/header"></head>
<body>
<div th:substituteby="fragments/bodyHeader"></div>
<div class="row" data-ng-controller="UsersListCtrl" data-ng-init="loadUsers(usersUrl)">
    <div class="large-12 columns">
        <ul class="breadcrumbs left">
            <li><a href="/">Landing</a></li>
            <li class="current"><a ng-href="{{links.self}}">All Users</a></li>
        </ul>
        <div class="right">
            <ul class="button-group radius right">
                <li><a class="button small" data-ng-disabled="!links.prev"
                       data-ng-click="loadUsers(links.prev)"><i class="icon-angle-left"></i></a></li>
                <li><a class="button small" data-ng-disabled="!links.next"
                       data-ng-click="loadUsers(links.next)"><i class="icon-angle-right"></i></a></li>

            </ul>
            <a class="button small radius right" data-reveal-id="newUserModal"><i class="icon-plus"></i>&nbsp; Add
                User
            </a>
        </div>
    </div>
    <div class="large-12 columns">
        <table class="listTable table table-striped table-bordered large-12">
            <thead>
            <tr class="header">
                <th class="hide-for-small" th:text="#{user.username}"></th>
                <th th:text="#{user.firstName}"></th>
                <th th:text="#{user.lastName}"></th>
                <th class="hide-for-small" th:text="#{user.email}"></th>
                <th class="hide-for-small" th:text="#{user.phoneNumber}"></th>
            </tr>
            </thead>
            <tbody data-ng-repeat="user in users">
            <tr data-ng-click="gotoUser(user.links[0].href)">
                <td class="hide-for-small">{{user.username}}</td>
                <td>{{user.firstName}}</td>
                <td>{{user.lastName}}</td>
                <td class="hide-for-small"><a href="mailto:{{user.email}}">{{user.email}}</a></td>
                <td class="hide-for-small">{{user.phoneNumber}}</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="reveal-modal large" id="newUserModal">
        <div class="modal-header">
            <h1>Create New User</h1>
        </div>
        <div class="modal-body">
            <form name="newUserForm">
                <div class="row" novalidated="true">
                    <div class="large-6 columns" data-ng-class="{error: errors.username || newUserForm.username.$dirty &amp;&amp; newUserForm.username.$invalid}">
                        <label class="control-label" for="username" th:text="#{user.username}">Username</label>
                        <input name="username" data-ng-model="newUser.username" type="text" required="required"/>
                        <small data-ng-show="errors.username" data-ng-bind-html-unsafe="errors.username"></small>
                    </div>

                    <div class="large-6 columns" data-ng-class="{error: errors.password || newUserForm.password.$dirty &amp;&amp; newUserForm.password.$invalid}">
                        <label class="control-label" for="password" th:text="#{user.password}">Passowrd</label>
                        <input name="password" data-ng-model="newUser.password" type="password" required="required"/>
                        <small data-ng-show="errors.password" data-ng-bind-html-unsafe="errors.password"></small>
                    </div>
                </div>
                <div class="row">
                    <div class="large-6 columns" data-ng-class="{error: errors.firstName || newUserForm.firstName.$dirty &amp;&amp; newUserForm.firstName.$invalid}">
                        <label class="control-label" for="firstName" th:text="#{user.firstName}">First Name</label>
                        <input name="firstName" data-ng-model="newUser.firstName" type="text" required="required"/>
                        <small data-ng-show="errors.firstName" data-ng-bind-html-unsafe="errors.firstName"></small>
                    </div>

                    <div class="large-6 columns" data-ng-class="{error: errors.lastName || newUserForm.lastName.$dirty &amp;&amp; newUserForm.lastName.$invalid}">
                        <label class="control-label" for="lastName" th:text="#{user.lastName}">Last Name</label>
                        <input name="lastName" data-ng-model="newUser.lastName" type="text" required="required"/>
                        <small data-ng-show="errors.lastName" data-ng-bind-html-unsafe="errors.lastName"></small>
                    </div>
                </div>
                <div class="row">
                    <div class="large-6 columns" data-ng-class="{error: errors.email || newUserForm.email.$dirty &amp;&amp; newUserForm.email.$invalid}">
                        <label class="control-label" for="email" th:text="#{user.email}">Email</label>
                        <input name="email" data-ng-model="newUser.email" type="email" required="required"/>
                        <small data-ng-show="errors.email" data-ng-bind-html-unsafe="errors.email"></small>
                    </div>

                    <div class="large-6 columns" data-ng-class="{error: errors.phoneNumber || newUserForm.phoneNumber.$dirty &amp;&amp; newUserForm.phoneNumber.$invalid}">
                        <label class="control-label" for="phoneNumber" th:text="#{user.phoneNumber}">Phone
                            Number</label>
                        <input name="password" data-ng-model="newUser.phoneNumber" type="tel" required="required"/>
                        <small data-ng-show="errors.phoneNumber" data-ng-bind-html-unsafe="errors.phoneNumber"></small>
                    </div>
                </div>
            </form>
        </div>
        <a class="close-reveal-modal">&#215;</a>
        <a type="submit" data-ng-class="{disabled: !newUserForm.$valid}" class="button small radius right" data-ng-click="submitNewUser()">Create User</a>

    </div>
</div>

<script th:src="@{/js/vendor/jquery.js}"></script>
<script th:src="@{/js/vendor/angular/angular.min.js}"></script>
<script th:src="@{/js/vendor/angular/angular-resource.min.js}"></script>
<script th:src="@{/js/app.js}"></script>
<script th:src="@{/js/controllers/users/UsersCtrl.js}"></script>
<script th:src="@{/js/vendor/foundation/foundation.js}"></script>
<script th:src="@{/js/vendor/foundation/foundation.reveal.js}"></script>
<script th:src="@{/js/vendor/foundation/foundation.topbar.js}"></script>
<script>
    $(document).foundation();
</script>
</body>
</html>
