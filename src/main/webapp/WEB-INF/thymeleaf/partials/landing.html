<div data-ng-controller="LandingCtrl">
    <div class="outer">
        <div class="sidebar" data-ng-controller="ProjectsListCtrl">
            <div id="sidebar-top">
                <p>NGS Archive</p>

                <div class="">
                    <input type="search" class="sidebar-search" data-ng-model="search.project"
                           placeholder="project search"/>
                </div>
            </div>
            <div class="sidebar-inner">
                <ul>
                    <li data-ng-repeat="p in projects | filter:{name: search.project}"
                        data-ng-click="gotoProject($event, p.links.self)">
                        <a>
                            <div>
                                <i class="icon-tasks"></i>&nbsp;
                                <span>{{p.name}}</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>
            <div id="sidebar-bottom">
                <h4>{{ user.firstName }} {{ user.lastName }}</h4>
                <span class="dropup">
                    <a class="dropdown-toggle"><i class="icon-cogs"></i>&nbsp;Settings</a>
                    <ul class="dropdown-menu">
                        <li><a href="" data-ng-click="projectModal.openDialog()"><i class="icon-tasks"></i>&nbsp;New
                            Project</a></li>
                    </ul>
                </span>
                <span data-ng-click="logout()"><i class="icon-signout"></i>&nbsp;Logout</span>
            </div>
        </div>
        <div class="main" ui-view=""></div>
    </div>

    <script type="text/javascript">
        var NGS_SPACE = {
            resizePageSection: function (h) {
                var top = $("#section-top");
                var base = (h - top.offset().top)/2;
                var bottom = $('#section-bottom');
                console.log("HEIGHT: " + top.innerHeight());
                top.innerHeight(base);
                if (bottom.length) {
                    bottom.innerHeight(base);
                }

            },
            resizeSideBar: function () {

            },
            main_el: $(".main"),
            outer_el: $(".outer"),
            sidebar: {
                inner_el: $(".sidebar-inner"),
                top_height: $("#sidebar-top").outerHeight(),
                bottom_height: $("#sidebar-bottom").outerHeight(),
                width: $('.sidebar').width()
            }
        };

        (function () {

            function g(h, w) {
                NGS_SPACE.sidebar.inner_el.height(h - NGS_SPACE.sidebar.top_height - NGS_SPACE.sidebar.bottom_height);
                NGS_SPACE.main_el.width(w - NGS_SPACE.sidebar.width);
                NGS_SPACE.outer_el.height(h);
            }

            $(window).resize(function () {
                var h = window.innerHeight;
                var w = window.innerWidth;
                g(h , w);
                NGS_SPACE.resizePageSection(h - 35);
            });

            $(document).ready(function () {
                var h = window.innerHeight;
                var w = window.innerWidth;
                g(h , w);
            });
        })();
    </script>
</div>
