<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="template/page">
<body>
<nav id="topnav" class="navbar navbar-inverse navbar-static-top" role="navigation"
     ng-init="navbarCollapsed = true">
	<div class="container ng-cloak">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" ng-click="navbarCollapsed = !navbarCollapsed">
				<span class="sr-only" th:text="#{sr.nav.toggle}">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a th:href="@{/}" href="#">
				<img src="/resources/img/irida_logo_dark.svg" th:src="@{/resources/img/irida_logo_dark.svg}" style="height: 32px; margin-top: 9px;" th:alt="#{global.title}" />
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="navbar-collapse" uib-collapse="navbarCollapsed">
			<ul th:unless="${galaxyCallback}" class="nav navbar-nav">
				<li uib-dropdown="">
					<a href="#" uib-dropdown-toggle="" role="button">
						<span th:text="#{nav.main.project}">Projects</span>
						&nbsp;
						<span class="caret"></span>
					</a>
					<ul class="uib-dropdown-menu" role="menu">
						<li role="menuitem">
							<a href="/projects" th:href="@{/projects}"
							   th:text="#{nav.main.project-list}">List Projects
							</a>
						</li>
						<li role="menuitem" sec:authorize="hasAnyRole('ROLE_ADMIN')">
							<a href="/projects/all" th:href="@{/projects/all}"
							   th:text="#{nav.main.project-list-all}">One more separated link
							</a>
						</li>
						<li role="presentation" class="divider"></li>
						<li role="menuitem">
							<a th:href="@{/projects/new}" href="/projects/new">
								<span th:text="#{nav.main.project-create}">Create New Project</span>
							</a>
						</li>
					</ul>
				</li>
				<li uib-dropdown="">
					<a href="#" data-toggle="uib-dropdown" uib-dropdown-toggle="">
						<span th:text="#{nav.main.analysis}">Analysis</span>
						&nbsp;
						<span class="caret"></span>
					</a>
					<ul class="uib-dropdown-menu" role="menu">
						<li role="menuitem">
							<a th:href="@{/pipelines}" href="/pipelines" th:text="#{nav.main.pipelines}">Pipelines</a></li>
						<li role="menuitem">
							<a th:href="@{/analysis}" href="/analysis" th:text="#{nav.main.analysis-admin-user}">Your Analysis</a>
						</li>
						<li role="menuitem" sec:authorize="hasAnyRole('ROLE_ADMIN')">
							<a th:href="@{/analysis/all}" href="/analysis/all"
							   th:text="#{nav.main.analysis-admin-all}">List All Analysis
							</a>
						</li>
					</ul>
				</li>
				<li sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_MANAGER')" class="uib-dropdown" uib-dropdown="">
					<a href="#" class="uib-dropdown-toggle" data-toggle="uib-dropdown" uib-dropdown-toggle="" role="button">
						<span th:text="#{nav.main.users}">Users</span>
						&nbsp;
						<span class="caret"></span>
					</a>
					<ul class="uib-dropdown-menu" role="menu">
						<li role="menuitem">
							<a href="/users" th:href="@{/users}" th:text="#{nav.main.users-list}">
								List Users
							</a>
						</li>
						<li role="presentation" class="divider"></li>
						<li role="menuitem">
							<a href="#" th:href="@{/users/create}">
								<span th:text="#{nav.main.add.user}">Create new user</span>
							</a>
						</li>
					</ul>
				</li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li th:unless="${galaxyCallback}" sec:authorize="hasRole('ROLE_ADMIN')" class="uib-dropdown" uib-dropdown="">
					<a href="#" class="uib-dropdown-toggle" data-toggle="uib-dropdown" uib-dropdown-toggle="">
						<span th:text="#{nav.main.admin}">Admin</span>
						<span class="caret"></span>
					</a>
					<ul class="uib-dropdown-menu" role="menu">
						<li role="menuitem">
							<a href="#" th:href="@{/clients}" th:text="#{nav.main.clients}">
								_Clients_
							</a>
						</li>
						<li role="menuitem">
							<a href="#" th:href="@{/sequencingRuns}" th:text="#{nav.main.sequencingruns}">
								_Sequencing Runs_
							</a>
						</li>
					</ul>
				</li>
				<!--<li class="uib-dropdown" uib-dropdown="">-->
					<!--<a href="#" class="uib-dropdown-toggle" data-toggle="uib-dropdown" uib-dropdown-toggle="">-->
						<!--<span th:text="#{nav.main.settings}">Account</span>-->
						<!--<span class="caret"></span>-->
					<!--</a>-->
					<!--<ul class="uib-dropdown-menu" role="menu">-->
                        <!--&lt;!&ndash;/* TODO: Re-enable for federated data-->
						<!--<li>-->
							<!--<a href="#" th:href="@{/remote_api}" th:text="#{nav.main.remoteapis}">-->
								<!--Remote API Status-->
							<!--</a>-->
						<!--</li>-->
						<!--<li class="divider"></li>-->
                        <!--*/&ndash;&gt;-->
					<!--</ul>-->
				<!--</li>-->
				<li th:unless="${galaxyCallback}" uib-dropdown="">
					<a href="#" class="uib-dropdown-toggle" data-toggle="uib-dropdown"
					   uib-dropdown-toggle="">
						<span th:text="#{nav.main.help}">__Help__</span>
						<span class="caret"></span>
					</a>
					<ul class="uib-dropdown-menu" role="menu">
						<li role="menuitem">
							<a th:text="#{nav.main.userguide}"
							   href="https://irida.corefacility.ca/documentation/user/user" target="_blank">__User
								Guide__
							</a>
						</li>
						<li role="menuitem" sec:authorize="hasRole('ROLE_ADMIN')">
							<a th:text="#{nav.main.adminguide}"
							   href="https://irida.corefacility.ca/documentation/user/administrator" target="_blank">
								__Admin Guide__
							</a>
						</li>
						<li role="menuitem">
							<a href="http://hub.corefacility.ca/?category=irida" th:text="#{nav.main.iridahub}"
							   target="_blank">
								__IRIDA Hub__
							</a>
						</li>
					</ul>
				</li>
				<li>
					<button type="button" id="cart-show-btn" class="btn btn-info btn-sm navbar-btn"
					        ng-class="cart.animation"
					        ng-click="cart.show=!cart.show">
						<span th:text="#{cart.label}"></span>
						&nbsp;
						<span id="cart-count" class="badge badge-default" ng-bind="cart.count">0</span>
					</button>
				</li>
				<li th:unless="${galaxyCallback}">
					<a href="#" th:href="@{/remote_api}" data:uib-tooltip="#{nav.main.remoteapis}" tooltip-placement="bottom">
						<i class="glyphicon glyphicon-transfer"></i>
					</a>
				</li>

				<li th:unless="${galaxyCallback}">
					<a class="nav-gravatar" href="#" th:href="@{/users/current}" th:with="email=${#httpSession.getAttribute('CURRENT_USER_DETAILS') != null} ? ${#httpSession.getAttribute('CURRENT_USER_DETAILS').email} : 'anonymous@anonymous.ca'"
					   data:uib-tooltip="#{nav.main.account}" tooltip-placement="bottom">
						<img class="gravatar" data:gravatar-src-once="'\'' + ${email} + '\''"
						     gravatar-size="28"/>
					</a>
				</li>
				<li th:unless="${galaxyCallback}">
					<a th:href="@{/logout}" href="/logout" data:uib-tooltip="#{nav.main.logout}" tooltip-placement="bottom">
						<i class="fa fa-sign-out"></i>
					</a>
				</li>
			</ul>
		</div>
		<!-- /.navbar-collapse -->
	</div>
	<!-- /.container-fluid -->
</nav>
</body>
</html>
