<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="template/page">
<head lang="en">
	<meta charset="UTF-8"/>
	<title>My Title Goes Here</title>
	<link rel="stylesheet" href="/resources/css/app.css" th:href="@{/resources/css/app.css}"/>
	<style>
		.ng-cloak {
			display: none !important;
		}

		.main-container {
			display: flex;
			flex-direction: row;
			height: 100%;
		}

		.side-nav {
			width: 200px;
			background-color: #101010;
			color: #e0e0e0;
			margin-right: 1rem;
			padding: .5rem;
		}

		.content {
			flex-grow: 1;
		}

		.analysis__state {
			border-left: 1rem solid darkslategrey;
		}

		.analysis__state--NEW {
			border-color: chartreuse;
		}

		.analysis__state--PREPARING {
			border-color: lightblue;
		}

		.analysis__state--PREPARING {
			border-color: deepskyblue;
		}

		.analysis__state--PREPARED {
			border-color: darkslateblue;
		}

		.analysis__state--SUBMITTED {
			border-color: greenyellow;
		}

		.analysis__state--ERROR {
			border-color: red;
		}
	</style>
	<script>window.dependencies = ['irida.analysis.user'];</script>
</head>
<body>
<div layout:fragment="page">
	<div class="main-container">
		<aside class="side-nav" ng-controller="filterController as filter">
			<h2>Filter</h2>
			<input class="form-control input-full" type="search" placeholder="search" ng-model="filter.search"
			       ng-model-options="{ debounce: 350 }" ng-change="filter.doSearch()"/>
		</aside>
		<div class="content ng-cloak" ng-controller="analysisController as ctrl">
			<ul class="boards">
				<li class="board" ng-repeat="analysis in ctrl.analyses | analysesFilter">
					<a href="#" class="button board_inner row">
						<div ng-class="'analysis__state--' + analysis.analysisState" class="analysis__state col-md-2">
							<div class="board_detail--value">{{::analysis.analysisState | stateFilter}}</div>
							<div class="board_detail--desc">State</div>
						</div>
						<div class="col-md-4">
							<div class="board_detail--value">{{analysis.label}}</div>
							<div class="board_detail--desc">Analysis Name</div>
						</div>
						<div class="col-md-4">
							<div class="board_detail--value">{{::analysis.createdDate | date:'medium'}}</div>
							<div class="board_detail--desc">Date Created</div>
						</div>
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>
<th:block layout:fragment="page-scripts">
	<script th:inline="javascript">
		var STATE_MAP = /*[[${states}]]*/ {};
	</script>
	<script src="/resources/js/pages/analyses/analyses_user.js"
	        th:src="@{/resources/js/pages/analyses/analyses_user.js}"></script>
</th:block>
</body>
</html>