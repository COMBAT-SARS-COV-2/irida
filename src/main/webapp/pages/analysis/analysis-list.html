<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="template/page"
      ddl:bundle-includes="analyses-dev"
      ddl:asset-css-excludes="datatables">
<head>
    <title>_Analyses_</title>
</head>
<body>
<div layout:fragment="page">
    <h1>_Analyses_</h1>

    <div dt:conf="analysisTable">
      <div dt:confType="extrajs" dt:bundles="analysis-table" dt:placeholder="before_end_document_ready" />
      <div dt:confType="extrahtml" dt:uid="0">
				<div class="btn-toolbar pull-right" style="padding-left: 9px;">
          <button id="openFilterModal" class="btn btn-sm btn-default" data-toggle="modal" data-target="#filterModal">
            _Advanced Filter_
          </button>
					<button id="clearFilterBtn" class="btn btn-sm btn-inverse" th:text="#{projects.filter.clear}">Clear</button>
				</div>
			</div>
    </div>
    <table id="analysisTable" dt:table="true" dt:url="@{/analysis/ajax/dev}" dt:filterPlaceholder="none">
        <thead>
        <tr>
            <th dt:property="analysisState" dt:renderFunction="analyses-dev#analysesTable.displayProgress">_State_</th>
            <th dt:property="name" dt:renderFunction="analyses-dev#analysesTable.createLinkButton">_Name_</th>
            <th dt:property="workflowId">_Workflow_</th>
            <th dt:property="submitter.label" dt:sortable="false">_Submitter_</th>
            <th dt:property="createdDate" width="150px" dt:sortType="natural"
                dt:renderFunction="datatables-utils#datatable.formatDate">_Created Date_</th>
            <th dt:property="duration" dt:sortable="false" dt:renderFunction="analyses-dev#analysesTable.getHumanTime">_Duration_</th>

        </tr>
        </thead>
    </table>
</div>


<th:block layout:fragment="page-scripts">
  <div class="modal fade" id="filterModal" role="dialog" aria-labelledby="#filterTitle">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" data:aria-label="#{form.btn.close}">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="filterTitle">_Advanced Analysis Filters_</h4>
				</div>
				<div class="modal-body">
					<form id="filterForm" name="filterForm">
						<div class="form-group">
							<label>_name_</label>
							<input autofocus="autofocus" type="text" id="nameFilter" name="name" class="form-control"/>
						</div>
						<div class="form-group">
							<label>_Analysis State_</label>
							<select id="analysisStateFilter" name="analysisState" class="form-control">
                <option value="">_Select_</option>
                <option th:each="state : ${states}" th:value="${state}"
  							        th:text="#{'analysis.state.' + ${state}}"></option>
              </select>
						</div>
            <div class="form-group">
							<label>_Workflows_</label>
							<select id="workflowIdFilter" name="workflowId" class="form-control">
                <option value="">_Select_</option>
                <option th:each="workflow : ${analysisTypes}" th:value="${workflow}"
  							        th:text="#{'workflow.' + ${workflow} + '.title'}"></option>
              </select>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button tabindex="-1" type="button" class="btn btn-default" data-dismiss="modal" th:text="#{form.btn.close}"></button>
					<button id="filterAnalysesBtn" type="submit" class="btn btn-primary" data-dismiss="modal" th:text="#{projects.filter.btn}">Filter Projects</button>
				</div>
			</div>
		</div>
	</div>
</th:block>
</body>
</html>
