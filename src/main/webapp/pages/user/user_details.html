<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="templates/wet-boew/wet-layout">
<head>
    <title th:text="${user.label}">_USER PAGE_</title>
</head>
<body>
<div class="container" layout:fragment="content">
    <div class="row">
        <div th:replace="templates/wet-boew/partials/sitemenu :: menu-en">_MENU_</div>
    </div>
    <div class="row">
        <div class="col-md-12">
        	<h1 id="wb-cont" property="name" th:text="${user.label}">__USER NAME__</h1>
        </div>
    </div>
    <div class="row">
    	<!-- User details -->
    	<div class="col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading clearfix">
                	<h3 class="panel-title pull-left" th:text="#{user.details}">_User Details_</h3>
                	<a th:href="@{/users/{id}/edit(id=${user.id})}" href="/users/1/edit"><span class="pull-right" th:text="#{user.edit}">_Edit_</span></a>
                </div>
                    
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked" th:inline="text">
                    	<li>
                    		<span class="glyphicon glyphicon-barcode"></span>&nbsp;[[#{users.id}]]
                    		<span class="pull-right" id="user-id"
                                th:text="${user.id}">_USER_ID_</span>
                    	</li>
                    	<li>
                    		<span class="glyphicon glyphicon-user"></span>&nbsp;[[#{users.username}]]
                    		<span class="pull-right" id="user-username"
                                th:text="${user.username}">_USERNAME_</span>
                    	</li>
                    	<li>
                    		<span class="glyphicon glyphicon-tag"></span>&nbsp;[[#{user.name}]]
                    		<span class="pull-right" id="user-name"
                                th:text="${user.label}">_NAME_</span>
                    	</li>
                    	<li>
                    		<span class="glyphicon glyphicon-envelope"></span>&nbsp;[[#{users.email}]]
                    		<span class="pull-right">
                    			<a th:href="'mailto:'+${user.email}" href="mailto:someone@nowhere.com">
                    				<span id="user-email" th:text="${user.email}">_EMAIL_</span>
                    			</a>
                    		</span>
                    	</li>
                    	<li>
                    		<span class="glyphicon glyphicon-earphone"></span>&nbsp;[[#{user.phone}]]
                    		<span class="pull-right" id="user-phone"
                                th:text="${user.phoneNumber}">_123-456-7890_</span>
                    	</li>
                    	<li>
                    		<span class="glyphicon glyphicon-stats"></span>&nbsp;[[#{users.role}]]
                    		<span class="pull-right" id="user-role"
                                th:text="${systemRole}">_ROLE_</span>
                    	</li>
                        <li>
                        	<span class="glyphicon glyphicon-calendar"></span>&nbsp;[[#{user.created}]]
                        	<span class="pull-right" id="user-created"
                                th:text="${#calendars.format(user.createdDate, 'dd MMM yyyy')}">_DATE_CREATED_</span>
                        </li>
                        <li>
                        	<span class="glyphicon glyphicon-calendar"></span>&nbsp;[[#{user.modified}]]
                        	<span class="pull-right" id="user-modified"
                                th:text="${#calendars.format(user.modifiedDate, 'dd MMM yyyy')}">__DATE_CREATED__</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- User project table -->
        <div class="col-md-6 ">
            <div class="panel panel-info">
                <div class="panel-heading clearfix">
                	<h3 class="panel-title pull-left" th:text="#{user.projects.title}">_Projects_</h3>
                	<span class="pull-right" th:text="#{user.projects.view} + ' (' + ${totalProjects} + ')'">_View All (10)_</span>
                </div>
                    
                <div class="panel-body">
                	<table id="projectsTable" class="table table-striped table-hover">
                		<thead>
                			<tr>
                				<th th:text="#{user.projects.id}">_ID_</th>
                    			<th th:text="#{user.projects.name}">_NAME_</th>
                    			<th th:text="#{user.projects.role}">_ROLE_</th>
                			</tr>
                		</thead>
                		<tbody>
                			<tr th:each="project,iterStat : ${projects}">
                				<td th:text="${project.subject.id}">_PROJECT_ID_</td>
                				<td th:text="${project.subject.name}">_PROJECT_NAME_</td>
                    			<td class="project-role" ><span class="project-role-icon"></span>&nbsp;<span class="project-role-name" th:title="${project.projectRole}" th:text="${projectRoles[iterStat.index]}">_PROJECT_ROLE_</span></td>
                			</tr>
                		</tbody>
            		</table>
                </div>
            </div>
        </div>
        
    </div>
</div>
<div layout:fragment="scripts" th:inline="javascript">
	<!-- Add the project role icons to the project role names -->
	<script th:inline="javascript">
		var roleClass = new Array();
		roleClass["PROJECT_USER"] = "glyphicon glyphicon-user";
		roleClass["PROJECT_OWNER"] = "glyphicon glyphicon-tower";
        $(document).ready(function () {
            $('#projectsTable').find(".project-role").each(function(index,element){
            	var iconSpan = $(element).find(".project-role-icon");
            	var rolename = $(element).find(".project-role-name").attr("title");
            	iconSpan.addClass(roleClass[rolename]);
            });
        });
    </script>
</div>
</body>
</html>