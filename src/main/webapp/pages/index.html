<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="template/page" ddl:bundle-includes="dashboard">

<head>
  <title th:text="#{dashboard.title}">THIS IS SOMETHING WRONG</title>
  <script>window.dependencies = ['irida.dashboard'];</script>
  <style>
    .updates {
      opacity: 1;
      transition: 0.5s linear all;
    }

    .updates.ng-hide {
      opacity: 0;
    }

    .updates-content ul {
      list-style-position: inside;
      padding: 0;
    }
  </style>
</head>

<body>
  <div class="row" layout:fragment="page">
    <div layout="row" layout-margin="" layout-fill="">
      <div flex="66" class="md-whiteframe-z1">
        <md-toolbar>
          <div class="md-toolbar-tools">
            <h2 th:text="#{event.title}">_Recent Activities_</h2>
            <span flex=""></span>
            <md-button th:href="@{/events/admin}" sec:authorize="hasRole('ROLE_ADMIN')"
                       th:text="#{activities.list-all}">_All Projects_
            </md-button>
          </div>
        </md-toolbar>
        <md-content layout-padding="">
          <div class="form-group">
            <label for="size" th:text="#{event.size}">_Activities to show:_</label>
            <select style="width:100px;" id="size" class="form-control event-count">
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
          <div id="events"></div>
          <input type="hidden" id="eventURL" value="/events/current_user" th:value="@{/events/current_user}"/>
        </md-content>
      </div>
      <div th:if="${updates}" flex="" class="md-whiteframe-z1" ng-controller="updateController as updateCtrl">
        <md-toolbar>
          <div class="md-toolbar-tools">
            <h2 th:text="#{updates.title}">_UPDATES_</h2>
          </div>
        </md-toolbar>
        <md-content layout-padding="" class="updates" ng-show="updateCtrl.content">
          <div class="updates-content" marked="updateCtrl.content"></div>
        </md-content>
      </div>
    </div>
  </div>
  <th:block layout:fragment="page-scripts">
    <script th:inline="javascript">
      var PAGE = {
        urls: {
          updates: /*[[${updates}]]*/ '/resources/updates.md'
        }
      };
    </script>
  </th:block>
</body>

</html>