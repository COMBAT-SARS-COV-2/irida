<!-- BASIC SETTINGS -->
<div id="basic" class="panel panel-default">
    <div class="panel-heading" th:text="#{project.settings.basic.heading}">_Basic project settings_</div>
    <div class="panel-body">
        <div class="checkbox">
            <label>
                <input id="assemble" type="checkbox" value="assemble" th:checked="${project.assembleUploads}"/>
                <span th:text="#{project.settings.assemble}">_Automatically assemble uploads_</span>
            </label>
        </div>
    </div>
</div>

<!-- REMOTE API -->
<div id="remote" class="panel panel-default">
    <div class="panel-heading" th:text="#{project.settings.sync.heading}">_Project Sync Settings_</div>
    <div class="panel-body" th:with="status = ${project.getRemoteStatus()}">
        <div class="form-group">
            <label class="control-label" th:text="#{project.settings.sync.lastSync}">_Last Sync_</label>
            <div>
                <span th:text="${#calendars.format(project.getRemoteStatus().getLastUpdate(), 'dd MMM yyyy hh:mma')}"></span>
                <button id="forceSync" role="button" class="btn btn-primary btn-sm" th:text="#{project.settings.sync.forceSync}">_Force Sync_</button>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label" th:text="#{project.settings.api}">_API_</label>
            <div>
                <a href="#" th:href="@{/remote_api/{id}(id=${status.getApi().getId()})}" th:text="${status.getApi().getLabel()}">_api_</a>
                <span id="api-status" class="api-status">
                <i class="fa fa-spinner fa-spin"></i>
            </span>

                <button type="button" class="oauth-connect-link btn btn-default hidden" id="connect-button"
                        th:text="#{remoteapi.status.connect.button}" th:attr="data-api-id=${status.getApi().getId()}">_Connect_</button>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label" for="frequency" th:text="#{project.settings.sync.frequency}">_Sync Frequency_</label>
            <select id="frequency" class="form-control input-full sync-setting">
                <option th:each="freq : ${frequencies}" th:value="${freq}" th:text="#{'project.settings.frequency.' + ${freq}}" th:selected="${project.getSyncFrequency() == freq}"></option>
            </select>
        </div>
        <div class="form-group">
            <label class="control-label" for="frequency" th:text="#{project.settings.sync.user}">_Sync User_</label>
            <div>
                <a href="#" th:text="${status.getReadBy().getLabel()}" th:href="@{/users/{id}(id=${status.getReadBy().getId()})}">_User</a>
                <span class="api-connected-action" hidden="hidden">
              <button id="becomeSyncUser" role="button" class="btn btn-primary btn-sm" th:text="#{project.settings.sync.becomeSyncUser}">_Become owner_</button>
            </span>
            </div>
        </div>
    </div>
    <th:block layout:fragment="scripts" th:inline="javascript">
        <script layout:fragment="scripts" th:inline="javascript" th:replace="remote_apis/remote_api_connect"></script>
    </th:block>
</div>