<!DOCTYPE html>
<html
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="projects/_base">
<head>
	<title th:text="${project.label} + ' - ' + #{project.nav.samples}"></title>
	<script th:inline="javascript">
		window.dependencies = ['irida.projects.samples.controller'];
		var PAGE = {
			urls: {
				project: /*[[@{/projects/{id}/ajax/samples(id=${project.getId()})}]]*/ '',
				local: /*[[@{/projects/{id}/associated/samples(id=${project.getId()})}]]*/ '',
				remote: /*[[@{/projects/{id}/associated/remote/samples(id=${project.getId()})}]]*/ '',
				merge: /*[[@{/projects/{id}/ajax/samples/merge(id=${project.getId()})}]]*/ '',
				remove: /*[[@{/projects/{id}/ajax/samples/delete(id=${project.getId()})}]]*/ '',
				copy: /*[[@{/projects/{id}/ajax/samples/copy(id=${project.getId()})}]]*/ ''
			},
			i18n: {
				associatedSelectedTooltip: /*[[#{project.samples.associated-selected-error}]]*/ '_Unavailable_'
			}
		};
	</script>
	<style>
		.btn input[type=checkbox] {
			margin: 0!important;
		}
		.selection-heading {
			width: 40px!important;
		}
		.counts {
			line-height: 2rem;
			height: 2rem;
		}
	</style>
</head>
<body>
<main layout:fragment="main" ddl:bundle-includes="project-samples" ddl:asset-css-excludes="jquery.datatables" ng-controller="SamplesController as samplesCtrl">

	<table id="samplesTable" datatable="ng" class="table table-hover ng-cloak table-selectable"  dt-options="samplesCtrl.dtOptions" dt-column-defs="samplesCtrl.dtColumnDefs" dt-instance="samplesCtrl.dtInstanceCallback">
		<thead>
		<tr>
			<th class="selection-heading">
				<div class="btn-group btn-group-sm" uib-dropdown="">
					<button class="btn btn-default"  uib-dropdown-toggle="" data:uib-tooltip="#{lists.select-title}" tooltip-append-to-body="true">
						<input type="checkbox" ng-model="samplesCtrl.allSelected" ng-click="samplesCtrl.selectAll($event)"/>
						<span class="caret"></span>
					</button>
					<ul uib-dropdown-menu="">
						<li role="menuitem">
							<a href="#" ng-click="samplesCtrl.selectPage($event)" th:text="#{lists.select-page}">Select Page</a></li>
					</ul>
				</div>
			</th>
			<th th:text="#{project.samples.table.name}">[Name]</th>
			<th th:text="#{project.samples.table.modified}" width="130px">[Modified Date]</th>
			<th th:text="#{project.samples.table.created}" width="130px">[Created Date]</th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="item in ::samplesCtrl.samples" ng-click="item.selected = !item.selected; samplesCtrl.rowClick($event, item)" ng-class="item.selected ? 'selected' : ''" data-index="{{$index}}">
			<td>
				<input type="checkbox" ng-model="item.selected" ng-click="samplesCtrl.rowClick($event, item)"/>
			</td>
			<td>
				<a data:ng-href="@{'/samples/{{item.sample.identifier}}'}" ng-bind="item.sample.label"></a></td>
			<td ng-bind="item.sample.modifiedDate | date"></td>
			<td ng-bind="item.sample.createdDate | date"></td>
		</tr>
		</tbody>
	</table>
</main>
</body>

<th:block layout:fragment="scripts">
	<script type="text/ng-template" id="buttons.html" th:include="projects/partials/samples.tmpl :: toolbar"></script>

	<script th:inline="javascript" type="text/ng-template" id="selectedCounts.html">
		<ng-pluralize count="samplesCtrl.selected.length"
		              data:when="#{project.samples.table.selected}"
		></ng-pluralize>
	</script>
</th:block>
</html>