<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:ddl="http://www.thymeleaf.org/dandelion"
      xmlns:dt="http://www.thymeleaf.org/dandelion/datatables"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="template/page">
<head>
    <title th:text="#{projects.title}">List of Projects</title>
    <style>
    	table tr th {
    		vertical-align: top !important;
    	}
    	
    	.yadcf-filter-reset-button {
    		display: none !important;
    	}
    </style>
</head>
<body>
<div layout:fragment="page">
    <main class="col-md-12" role="main" property="mainContentOfPage">
        <h1 th:text="#{projects.title}"></h1>
		<div dt:conf="projectsTable">
            <div dt:confType="callback" dt:type="init" dt:function="irida-datatables#datatable.tableDrawn"></div>
        </div>
        <table id="projectsTable" dt:table="true" dt:url="@{${ajaxURL}}" dt:filterPlaceholder="none">
        	<!-- 
        		
        		We (frustratingly) cannot use multiple rows in the header because Dandelion Datatables
        		doesn't support that: https://github.com/dandelion/dandelion-datatables/issues/249, so
        		we have to resort to writing out our filter fields into divs.
        	
        	 -->
            <thead>
            <tr role="row">
                <th dt:property="item.identifier" th:text="#{projects.table.id}" style="vertical-align: top;"></th>
                <th dt:filterable="true" dt:property="item.name" dt:selector="name-filter" >
                	<span th:text="#{projects.table.name}" />
                	<div id="name-filter" />
                </th>
                <th dt:filterable="true" dt:property="item.organism" dt:selector="organism-filter" >
                	<span  th:text="#{projects.table.organism}" />
                	<div id="organism-filter" />
                </th>
                <th dt:property="custom.role" dt:filterable="true" dt:filterType="select" dt:filterValues="roles" dt:selector="role-filter"
                    dt:renderFunction="irida-datatables#datatable.i18n">
                    <span  th:text="#{projects.table.role}"></span>
                    <div id="role-filter" />
                </th>
                <th dt:property="custom.samples" dt:searchable="false" th:text="#{projects.table.samples}"></th>
                <th dt:property="custom.members" dt:searchable="false" th:text="#{projects.table.members}"></th>
                <th dt:property="item.createdDate" dt:sortType="natural" th:text="#{projects.table.created}"
                    dt:renderFunction="irida-datatables#datatable.formatDate"></th>
                <th dt:property="item.modifiedDate" dt:sortType="natural" dt:sortInitDirection="desc" th:text="#{projects.table.modified}"
                    dt:renderFunction="irida-datatables#datatable.formatDate"></th>
            </tr>
            </thead>
        </table>
    </main>
</div>
<th:block layout:fragment="page-scripts" th:inline="javascript">
    <script>
        var roles = [
                /*[[#{projectRole.PROJECT_USER}]]*/ 'Collaborator',
                /*[[#{projectRole.PROJECT_OWNER}]]*/ 'Manager',
                /*[[#{projectRole.PROJECT_NONE}]]*/ 'None'
            ],
            PAGE = {
                lang: {
                    'PROJECT_USER': roles[0],
                    'PROJECT_OWNER': roles[1],
                    'PROJECT_NONE': roles[2]
                }
            };
    </script>
</th:block>
</body>
</html>
