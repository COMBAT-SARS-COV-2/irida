<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:ddl="http://www.thymeleaf.org/dandelion"
      xmlns:dt="http://www.thymeleaf.org/dandelion/datatables"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="template/page">
<head>
    <title th:text="#{projects.title}">THIS IS SOMETHING WRONG</title>
</head>
<body ddl:bundle-includes="irida-datatables">
<div layout:fragment="page">
    <main class="col-md-12" role="main" property="mainContentOfPage">
        <h1>
            <span th:text="#{projects.title}">Projects</span>
            <a ng-hide="uiGalaxyCtrl.inGalaxy" th:href="@{/projects/new}" href="/projects/new"
               class="btn btn-default pull-right" id="newProjectBtn">
                <span class="fa fa-fw fa-plus ng-cloak"></span>
                &nbsp;
                <span th:text="#{projects.btb.create-project}">Create New Project</span>
            </a>
        </h1>
        <div dt:conf="projectsTable">
            <div dt:confType="callback" dt:type="draw" dt:function="iridaDatatables#datatable.tableDrawn"></div>
        </div>
        <table id="projectsTable" dt:table="true" dt:url="@{${ajaxURL}}" dt:filterPlaceholder="head_before">
            <thead>
            <tr role="row">
                <th id="project-id" dt:property="id" th:text="#{projects.table.id}"></th>
                <th id="project-name" dt:filterable="true" dt:property="name" th:text="#{projects.table.name}"
                    dt:renderFunction="iridaDatatables#datatable.createItemButton"></th>
                <th id="project-organism" dt:filterable="true" dt:filterType="select" dt:property="organism" th:text="#{projects.table.organism}"></th>
                <th dt:property="role" dt:filterable="true" dt:filterType="select" dt:filterValues="roles" th:text="#{projects.table.role}"
                    dt:renderFunction="iridaDatatables#datatable.i18n"></th>
                <th dt:property="samples" dt:searchable="false" th:text="#{projects.table.samples}"></th>
                <th dt:property="members" dt:searchable="false" th:text="#{projects.table.members}"></th>
                <th dt:property="created" dt:sortType="natural" th:text="#{projects.table.created}"
                    dt:renderFunction="iridaDatatables#datatable.formatDate"></th>
                <th dt:property="modified" dt:sortType="natural" dt:sortInitDirection="desc" th:text="#{projects.table.modified}"
                    dt:renderFunction="iridaDatatables#datatable.formatDate"></th>
            </tr>
            </thead>
        </table>
    </main>
</div>
<th:block layout:fragment="page-scripts" th:inline="javascript">
    <script>
        var roles = [
                /*[[#{projectRole.PROJECT_USER}]]*/ 'Collaborator',
                /*[[#{projectRole.PROJECT_OWNER}]]*/ 'Manager',
                /*[[#{projectRole.PROJECT_NONE}]]*/ 'None'
            ],
            PAGE = {
                lang: {
                    'PROJECT_USER': roles[0],
                    'PROJECT_OWNER': roles[1],
                    'PROJECT_NONE': roles[2]
                }
            };
    </script>
</th:block>
</body>
</html>
