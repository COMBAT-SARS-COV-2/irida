<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="projects/_base" ddl:bundle-includes="project-settings">
<head>
    <title th:text="${project.label} + ' - ' + #{project.nav.settings}"></title>
    <script th:inline="javascript">

    </script>
</head>
<body>
<main layout:fragment="main" ddl:bundle-includes="project-settings">
    <div class="row">
        <div class="col-md-2">
            <div class="list-group">
                <a href=""
                   th:href="@{/projects/{id}/settings(id=${project.getId()})}"
                   class="list-group-item"
                   th:classappend="${#strings.equalsIgnoreCase(page, 'basic') ? 'active' : ''}"
                   th:text="#{project.settings.page.basic}">_Basic Settings_</a>
                <a href=""
                   th:href="@{/projects/{id}/settings/members(id=${project.getId()})}"
                   class="list-group-item"
                   th:classappend="${#strings.equalsIgnoreCase(page, 'members') ? 'active' : ''}"
                   th:text="#{project.settings.page.members}">_Members_</a>
                <a href=""
                   th:href="@{/projects/{id}/settings/groups(id=${project.getId()})}"
                   class="list-group-item"
                   th:classappend="${#strings.equalsIgnoreCase(page, 'groups') ? 'active' : ''}"
                   th:text="#{project.settings.page.groups}">_Groups_</a>
                <a href=""
                   th:href="@{/projects/{id}/settings/associated(id=${project.getId()})}"
                   class="list-group-item"
                   th:classappend="${#strings.equalsIgnoreCase(page, 'associated') or #strings.equalsIgnoreCase(page, 'associated-edit') ? 'active' : ''}"
                   th:text="#{project.settings.page.associated}">_Associated Projects_</a>
                <a href=""
                   th:href="@{/projects/{id}/settings/referenceFiles(id=${project.getId()})}"
                   class="list-group-item"
                   th:classappend="${#strings.equalsIgnoreCase(page, 'referenceFiles') ? 'active' : ''}"
                   th:text="#{project.settings.page.referenceFiles}">_ReferenceFiles_</a>
                <a th:if="${project.isRemote()} AND (${manageMembers} or ${isAdmin})"
                   href=""
                   th:href="@{/projects/{id}/settings/remote(id=${project.getId()})}"
                   class="list-group-item"
                   th:classappend="${#strings.equalsIgnoreCase(page, 'remote') ? 'active' : ''}"
                   role="presentation"
                   th:text="#{project.settings.page.remote}">_Remote</a>
            </div>
        </div>
        <div class="col-md-10">
            <th:block th:replace="projects/partials/settings/__${page}__.tmpl "/>
        </div>
    </div>
</main>

<th:block layout:fragment="scripts" th:inline="javascript">
    <th:block th:switch="${page}">
        <script th:case="'basic'">
          var PAGE = {
            i18n: {
              'error': /*[[#{project.settings.notifications.error}]]*/ '_Error updating project_'
            },
            urls: {
              'assemble': /*[[@{/projects/{id}/settings/assemble(id=${project.getId()})}]]*/ '/projects/1/settings/assemble',
              'sync': /*[[@{/projects/{id}/settings/sync(id=${project.getId()})}]]*/ '/projects/1/settings/sync',
              'coverage': /*[[@{/projects/{id}/settings/coverage(id=${project.getId()})}]]*/ '/projects/1/settings/coverage'
            }
          };
        </script>
        <th:block th:case="'remote'">
            <th:block th:replace="remote_apis/remote_api_connect"/>
        </th:block>
        <th:block th:case="'associated-edit'">
            <script>
              var PAGE = {
                urls: {
                  local: {
                    get: /*[[@{/projects/{id}/settings/associated/ajax/available(id=${project.getId()})}]]*/ '/projects/1/associated/ajax/available',
                    add: /*[[@{/projects/{id}/settings/associated/(id=${project.getId()})}]]*/ '/projects/1/associated/',
                    remove: /*[[@{/projects/{id}/settings/associated/(id=${project.getId()})}]]*/ '/projects/1/associated/'
                  }
                }
              };
            </script>
            <script src="/resources/js/build/projects-associated-edit.bundle.js"></script>
        </th:block>
    </th:block>
</th:block>
</body>
</html>
