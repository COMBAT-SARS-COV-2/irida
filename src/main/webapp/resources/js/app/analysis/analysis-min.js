!function(){function t(){var t=this;t.getZipFile=function(t){var e="hiddenDownloader",n=document.getElementById(e);null===n&&(n=document.createElement("iframe"),n.id=e,n.style.display="none",document.body.appendChild(n)),n.src=ANALYSIS_PAGE.URL.download+t}}function e(t,e){function n(){return t.get(ANALYSIS_PAGE.URLS.status).then(function(t){return t.data})}function a(t){var a=e(function(){n().then(function(n){100===parseInt(n.percentComplete)&&(e.cancel(a),window.location.reload()),t(n)})},5e3)}var o=this;return o.getAnalysisState=function(t){n().then(function(e){t(e),100!==parseInt(e.percentComplete)&&a(t)})},o}function n(t){function e(){return t.getAnalysisState(function(t){a.state=t.state,a.stateLang=t.stateLang,a.percentage=parseFloat(t.percentComplete),a.stateClass=n(a.state)})}function n(t){return"analysis__alert--"+t.toLowerCase()}var a=this;a.percentage=0,e()}angular.module("irida.analysis",[]).service("AnalysisService",["$http","$interval",e]).controller("FileDownloadController",[t]).controller("StateController",["AnalysisService",n])}();