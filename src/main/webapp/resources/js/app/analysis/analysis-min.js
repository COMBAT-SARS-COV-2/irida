!function(e){function t(){var e=this;e.getZipFile=function(e){var t="hiddenDownloader",n=document.getElementById(t);null===n&&(n=document.createElement("iframe"),n.id=t,n.style.display="none",document.body.appendChild(n)),n.src=ANALYSIS_PAGE.URL.download+e}}function n(e,t){function n(){return e.get(ANALYSIS_PAGE.URLS.status).then(function(e){return e.data})}function i(e){var i=t(function(){n().then(function(n){100===parseInt(n.percentComplete)&&(t.cancel(i),window.location.reload()),e(n)})},5e3)}var a=this;return a.getAnalysisState=function(e){n().then(function(t){e(t),100!==parseInt(t.percentComplete)&&i(e)})},a}function i(e){function t(){return e.getAnalysisState(function(e){i.state=e.state,i.stateLang=e.stateLang,i.percentage=parseFloat(e.percentComplete),i.stateClass=n(i.state)})}function n(e){return"analysis__alert--"+e.toLowerCase()}var i=this;i.percentage=0,t()}e.module("irida.analysis",["ui.router","phylocanvas"]).config(["$stateProvider",function(e){e.state("preview",{url:"/preview",templateUrl:"preview.html"}).state("inputs",{url:"/inputs",templateUrl:"inputs.html"}).state("provenance",{url:"/provenance",templateUrl:"provenance.html"})}]).directive("subNav",function(){return{restrict:"E",replace:!0,transclude:!0,priority:-1,template:'<div style="padding-bottom: 10px;"><ul class="nav nav-pills"><li ng-click="select(link)" ng-class="{active: link.selected}" ng-repeat="link in links"><a id="{{link.state}}" ui-sref="{{link.state}}">{{link.text}}</a></li></ul><div ng-transclude></div></div>',controller:["$scope","$location",function(t,n){t.links=[],t.select=function(n){e.forEach(t.links,function(t){t.selected=e.equals(n,t)})};var i=n.path();this.addLink=function(e){""===i&&0===t.links.length?(e.selected=!0,n.path("/"+e.state)):i.indexOf(e.state)>-1&&(e.selected=!0),t.links.push(e)}}]}}).directive("subNavItem",function(){return{require:"^subNav",restrict:"E",replace:!0,template:"",scope:{state:"@",text:"@"},link:function(e,t,n,i){i.addLink(e)}}}).service("AnalysisService",["$http","$interval",n]).controller("FileDownloadController",[t]).controller("StateController",["AnalysisService",i])}(window.angular);