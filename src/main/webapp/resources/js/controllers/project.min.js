/**
 * User:    Josh Adam <josh.adam@phac-aspc.gc.ca>
 * Date:    2013-06-04
 * Time:    1:05 PM
 * License: MIT
 */(function(e,t){"use strict";t.controller("ProjectCtrl",["$scope","$rootScope","ajaxService","$location",function(e,t,n,r){function s(t,r){n.create(t,{sequenceFileId:e.list2[0].identifier}).then(function(){e.list2=[];typeof r=="function"&&r()})}function o(t){n.get(t).then(function(t){e.sample.sequenceFiles=t.resource.resources;e.sample.sequenceFiles2=t.resource.resources})}e.show={};e.sample={};e.samples={};e.list2=[];var i=!1;e.addFileToSample=function(t,n,r){e.dragOverOut(t);s(r)};e.addFileToDetailSample=function(t,n){if(i){e.sample.sequenceFiles=e.sample.sequenceFiles2.slice(0);i=!1}else s(e.sample.addUrl,function(){o(e.sample.addUrl)})};e.getSequenceFiles=function(t){e.sample={name:t.label,addUrl:t.links["sample/sequenceFiles"],sequenceFiles:[],sequenceFiles2:[],details:!0};o(t.links["sample/sequenceFiles"])};e.fileDrag=function(e){$(e.target).toggleClass("project__file--drag")};e.dragOverOut=function(e){$(e.target).find(".folder").toggleClass("folder--draghover")};e.detailFileDrag=function(e,t,n){i=!0};e.detailFileDrop=function(){};e.deleteProject=function(){n.deleteItem(e.project.links.self).then(function(){t.$broadcast("PROJECT_DELETED",{name:e.project.name});r.path("/")})};e.selectedCount=function(){console.log("clas");return angular.element("input[name='selectedFiles']:checked").length>0};e.downloadFile=function(e,t){e.preventDefault();console.log("WHRE: "+t);window.open(t,"_blank")}}])})(angular,NGS);