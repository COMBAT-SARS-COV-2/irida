/*global angular:true, browser:true *//**
 * @license HTTP Auth Interceptor Module for AngularJS
 * (c) 2012 Witold Szczerba
 * License: MIT
 */(function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(n){e.$broadcast("event:auth-loginConfirmed",n);t.retryAll()}}}]).config(["$httpProvider",function(e){var t=["$rootScope","$q","httpBuffer",function(e,t,n){function r(e){return e}function i(r){if(r.status===401&&!r.config.ignoreAuthModule){var i=t.defer();n.append(r.config,i);e.$broadcast("event:auth-loginRequired");return i.promise}return t.reject(r)}return function(e){return e.then(r,i)}}];e.responseInterceptors.push(t)}]);angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector","$cookieStore",function(e,t){function i(t,n){function i(e){n.resolve(e)}function s(e){n.reject(e)}r=r||e.get("$http");r(t).then(i,s)}var n=[],r;return{append:function(e,t){n.push({config:e,deferred:t})},retryAll:function(){for(var e=0;e<n.length;++e){n[e].config.headers.Authorization="Basic "+t.get("authdata");i(n[e].config,n[e].deferred)}n=[]}}}])})();